<!--------------------------------------------------------------------------------->
<!-- IMPORTANT: This file is auto-generated by Driver (https://driver.ai). -------->
<!-- Manual edits may be overwritten on future commits. --------------------------->
<!--------------------------------------------------------------------------------->

The `board.h` file defines the structure and functions for managing a chess board, including initialization, move generation, and state comparison, within the `c_cpp_export_test` codebase.

# Purpose
This C header file defines the structure and functions necessary for managing a chess board within a chess game application. It includes essential components such as the `board` struct, which encapsulates the state of a chess board, including piece positions, the current player, castling rights, and move counters. The file provides functions for creating and initializing a board, either from scratch or from a Forsyth-Edwards Notation (FEN) string, which is a standard notation for describing a particular board position. Additionally, it includes functions for manipulating the board, such as setting and retrieving pieces, generating possible moves, checking for attacks and checks, and determining board equality. This header file is crucial for implementing the logic required to simulate and manage chess games programmatically.
# Imports and Dependencies

---
- `chesslib/square.h`
- `chesslib/piece.h`
- `chesslib/movelist.h`


# Data Structures

---
### board
- **Type**: `struct`
- **Members**:
    - `pieces`: An array of 64 pieces representing the chessboard's squares.
    - `currentPlayer`: Indicates the current player's color.
    - `castleState`: A bitmask that describes the castling rights for both players.
    - `epTarget`: The en passant target square, if applicable.
    - `halfMoveClock`: Counts the number of half-moves since the last capture or pawn advance.
    - `moveNumber`: Tracks the number of full moves in the game.
- **Description**: The 'board' structure represents the state of a chess game, encapsulating the positions of pieces on a standard 8x8 chessboard, the current player's turn, castling rights, en passant target square, and move counters. It is designed to facilitate the management and manipulation of a chess game state, supporting operations such as move generation, move execution, and state comparison.


# Function Declarations (Public API)

---
### boardCreate<!-- {{#callable_declaration:boardCreate}} -->
Allocates and initializes a chess board to the standard starting position.
- **Description**: This function creates a new chess board initialized to the standard starting position using the Forsyth-Edwards Notation (FEN) string defined by INITIAL_FEN. It returns a pointer to the newly allocated board structure. The caller is responsible for freeing the allocated memory when it is no longer needed. This function is useful for setting up a new game of chess with the standard initial setup. It is expected to be called when a fresh game board is required. If the function fails to create the board, it will return NULL.
- **Inputs**: None
- **Output**: A pointer to a newly allocated board structure initialized to the standard starting position, or NULL if the allocation fails.
- **See also**: [`boardCreate`](../../src/chesslib/board.c.md#boardCreate)  (Implementation)


---
### boardCreateFromFen<!-- {{#callable_declaration:boardCreateFromFen}} -->
Creates a chess board from a FEN string.
- **Description**: This function allocates memory for a new chess board and initializes it using the provided FEN (Forsyth-Edwards Notation) string, which describes a particular board position. It is useful for setting up a board to a specific state as described by the FEN. The function returns a pointer to the newly created board, or NULL if the initialization fails, indicating an invalid FEN string or memory allocation failure. The caller is responsible for freeing the allocated board to avoid memory leaks.
- **Inputs**:
    - `fen`: A null-terminated string representing the board position in Forsyth-Edwards Notation. The string must be valid and correctly formatted according to FEN standards. If the string is invalid, the function returns NULL.
- **Output**: A pointer to a newly allocated and initialized board structure, or NULL if the FEN string is invalid or memory allocation fails.
- **See also**: [`boardCreateFromFen`](../../src/chesslib/board.c.md#boardCreateFromFen)  (Implementation)


---
### boardInitInPlace<!-- {{#callable_declaration:boardInitInPlace}} -->
Initializes a chess board to the standard starting position.
- **Description**: This function sets up the provided chess board structure to represent the initial position of a standard chess game. It should be used when you want to reset or initialize a board to the starting configuration. The function must be called with a valid pointer to a `board` structure, which it will modify in place. Ensure that the board pointer is not null before calling this function to avoid undefined behavior.
- **Inputs**:
    - `b`: A pointer to a `board` structure that will be initialized. Must not be null, as the function will modify the board in place to represent the initial chess position.
- **Output**: None
- **See also**: [`boardInitInPlace`](../../src/chesslib/board.c.md#boardInitInPlace)  (Implementation)


---
### boardInitFromFenInPlace<!-- {{#callable_declaration:boardInitFromFenInPlace}} -->
Initializes a chess board from a FEN string in place.
- **Description**: This function sets up a chess board based on the provided FEN (Forsyth-Edwards Notation) string, directly modifying the given board structure. It should be used when you want to initialize or reset a board to a specific state described by a FEN string. The function expects a valid FEN string and a pre-allocated board structure. It returns an error code if the FEN string is malformed or if any constraints are violated, such as incorrect piece placement or invalid characters. The function modifies the board's pieces, current player, castling rights, en passant target, half-move clock, and move number based on the FEN data.
- **Inputs**:
    - `b`: A pointer to a pre-allocated board structure that will be initialized. The caller retains ownership and must ensure it is not null.
    - `fen`: A null-terminated string containing the FEN representation of the board state. It must be a valid FEN string, and the function will return an error if the string is malformed or contains invalid characters.
- **Output**: Returns 0 on successful initialization, or 1 if the FEN string is invalid or an error occurs during parsing.
- **See also**: [`boardInitFromFenInPlace`](../../src/chesslib/board.c.md#boardInitFromFenInPlace)  (Implementation)


---
### boardSetPiece<!-- {{#callable_declaration:boardSetPiece}} -->
Sets a piece on a specified square of the board.
- **Description**: This function places a specified chess piece on a given square of the board. It is typically used to update the board state during gameplay or setup. The board must be properly initialized before calling this function. The function does not perform any validation on the square or piece, so it is the caller's responsibility to ensure that the square is within valid bounds and the piece is a valid chess piece. The function directly modifies the board's internal state.
- **Inputs**:
    - `b`: A pointer to a board structure where the piece will be placed. Must not be null and should point to a valid, initialized board.
    - `s`: A square identifier indicating the position on the board where the piece will be placed. It should be a valid square within the board's range.
    - `p`: The chess piece to be placed on the specified square. It should be a valid piece as defined in the chess library.
- **Output**: None
- **See also**: [`boardSetPiece`](../../src/chesslib/board.c.md#boardSetPiece)  (Implementation)


---
### boardGetPiece<!-- {{#callable_declaration:boardGetPiece}} -->
Retrieve the piece located at a specific square on the board.
- **Description**: Use this function to obtain the piece that is currently positioned on a specified square of the chess board. This function is useful when you need to inspect the board's state or validate moves. It requires a valid board pointer and a square identifier. Ensure that the board has been properly initialized before calling this function to avoid undefined behavior.
- **Inputs**:
    - `b`: A pointer to a board structure representing the current state of the chess game. Must not be null and should point to a valid, initialized board.
    - `s`: An identifier for the square on the board from which to retrieve the piece. Must be a valid square within the board's boundaries.
- **Output**: The piece located at the specified square on the board.
- **See also**: [`boardGetPiece`](../../src/chesslib/board.c.md#boardGetPiece)  (Implementation)


---
### boardGenerateMoves<!-- {{#callable_declaration:boardGenerateMoves}} -->
Generates all legal moves for the current player on the board.
- **Description**: This function generates a list of all legal moves available for the current player on the given chess board. It should be called when you need to determine the possible moves a player can make in their current turn. The function considers all pieces of the current player, checks for legal moves, and includes special moves like castling if applicable. The board must be properly initialized and represent a valid game state before calling this function. The caller is responsible for freeing the returned move list to avoid memory leaks.
- **Inputs**:
    - `b`: A pointer to a board structure representing the current state of the chess game. Must not be null and should be properly initialized with a valid game state.
- **Output**: A pointer to a moveList structure containing all legal moves for the current player. The caller is responsible for freeing this list.
- **See also**: [`boardGenerateMoves`](../../src/chesslib/board.c.md#boardGenerateMoves)  (Implementation)


---
### boardIsSquareAttacked<!-- {{#callable_declaration:boardIsSquareAttacked}} -->
Determine if a square is attacked by a specified color.
- **Description**: This function checks if a given square on the chess board is under attack by any piece of the specified color. It is useful for determining threats and planning defensive or offensive strategies in a chess game. The function requires a valid board state and a square to check, along with the color of the potential attacking pieces. It returns a non-zero value if the square is attacked, and zero if it is not. The board must be properly initialized before calling this function.
- **Inputs**:
    - `b`: A pointer to a board structure representing the current state of the chess game. Must not be null and should be properly initialized.
    - `s`: The square to check for attacks. It should be a valid square on the board.
    - `attacker`: The color of the pieces to check for attacks. Must be a valid pieceColor value representing either white or black.
- **Output**: Returns a non-zero value if the square is attacked by the specified color, otherwise returns zero.
- **See also**: [`boardIsSquareAttacked`](../../src/chesslib/board.c.md#boardIsSquareAttacked)  (Implementation)


---
### boardIsInCheck<!-- {{#callable_declaration:boardIsInCheck}} -->
Checks if the current player is in check.
- **Description**: Use this function to determine if the current player on the given chess board is in a state of check, meaning their king is under threat of capture. This function is useful for validating moves and ensuring game rules are followed. It should be called on a valid board structure that has been properly initialized. The function does not modify the board or any of its properties.
- **Inputs**:
    - `b`: A pointer to a 'board' structure representing the current state of the chess game. The board must be initialized and not null. If 'b' is invalid or null, the behavior is undefined.
- **Output**: Returns a non-zero value if the current player's king is in check, otherwise returns zero.
- **See also**: [`boardIsInCheck`](../../src/chesslib/board.c.md#boardIsInCheck)  (Implementation)


---
### boardIsPlayerInCheck<!-- {{#callable_declaration:boardIsPlayerInCheck}} -->
Checks if the specified player is in check on the given board.
- **Description**: This function determines whether the player of the specified color is currently in check on the provided chess board. It should be used when you need to verify the check status of a player during a game. The function requires a valid board pointer and a player color as inputs. It iterates over the board to find the player's king and checks if it is under attack by any opposing pieces. The function returns a non-zero value if the player is in check, and zero otherwise. Ensure that the board is properly initialized before calling this function.
- **Inputs**:
    - `b`: A pointer to a board structure representing the current state of the chess game. Must not be null and should be properly initialized.
    - `player`: The color of the player to check for being in check. Must be a valid pieceColor value, either pcWhite or pcBlack.
- **Output**: Returns 1 if the specified player is in check, otherwise returns 0.
- **See also**: [`boardIsPlayerInCheck`](../../src/chesslib/board.c.md#boardIsPlayerInCheck)  (Implementation)


---
### boardIsInsufficientMaterial<!-- {{#callable_declaration:boardIsInsufficientMaterial}} -->
Determines if a chess board position has insufficient material to checkmate.
- **Description**: This function checks whether the current position on a chess board is such that neither player has enough material to force a checkmate, which would result in a draw. It should be used when you need to determine if the game can be declared a draw due to insufficient material. The function assumes that the board is properly initialized and contains valid chess pieces. It handles standard cases of insufficient material, such as only kings remaining, or kings with a single minor piece (knight or bishop), or kings with bishops all on the same color. The function does not handle more complex scenarios beyond these cases.
- **Inputs**:
    - `b`: A pointer to a board structure representing the current state of the chess game. The board must be initialized and must not be null. The function does not modify the board.
- **Output**: Returns 1 if the position is a draw due to insufficient material, otherwise returns 0.
- **See also**: [`boardIsInsufficientMaterial`](../../src/chesslib/board.c.md#boardIsInsufficientMaterial)  (Implementation)


---
### boardPlayMove<!-- {{#callable_declaration:boardPlayMove}} -->
Returns a new board with the specified move applied.
- **Description**: Use this function to create a new board state by applying a move to an existing board. It is useful when you need to preserve the original board state and work with a modified version. The function allocates memory for the new board, which must be freed by the caller to avoid memory leaks. Ensure that the input board is valid and initialized before calling this function.
- **Inputs**:
    - `b`: A pointer to the board on which the move will be applied. Must not be null and should point to a valid, initialized board structure.
    - `m`: The move to be applied to the board. It should be a valid move within the context of the current board state.
- **Output**: A pointer to a new board structure with the move applied. The caller is responsible for freeing this memory.
- **See also**: [`boardPlayMove`](../../src/chesslib/board.c.md#boardPlayMove)  (Implementation)


---
### boardPlayMoveInPlace<!-- {{#callable_declaration:boardPlayMoveInPlace}} -->
Plays a move on the given chess board, modifying it in place.
- **Description**: This function updates the state of a chess board by applying a specified move directly to it. It should be used when you want to modify the existing board state rather than creating a new one. The function handles special moves such as castling and en passant, updates the move counters, and switches the current player. It assumes the board is in a valid state and the move is legal. Callers must ensure the board is properly initialized before invoking this function.
- **Inputs**:
    - `b`: A pointer to a board structure representing the current state of the chess game. Must not be null and should be properly initialized before calling this function. The board is modified in place.
    - `m`: A move structure representing the move to be played. It must represent a legal move according to the current state of the board.
- **Output**: None
- **See also**: [`boardPlayMoveInPlace`](../../src/chesslib/board.c.md#boardPlayMoveInPlace)  (Implementation)


---
### boardEq<!-- {{#callable_declaration:boardEq}} -->
Determine if two chess boards are equal in all aspects.
- **Description**: Use this function to check if two chess board states are identical, including all attributes such as the current player, castle state, en passant target square, half-move clock, move number, and the arrangement of pieces on the board. This function is useful for validating board states in applications where exact board state comparison is necessary, such as in testing or game state validation. Both board pointers must be valid and non-null, and the function will return a non-zero value if the boards are equal, or zero if they differ in any aspect.
- **Inputs**:
    - `b1`: A pointer to the first board structure to compare. Must not be null and should point to a valid board.
    - `b2`: A pointer to the second board structure to compare. Must not be null and should point to a valid board.
- **Output**: Returns 1 if the boards are equal in all aspects, otherwise returns 0.
- **See also**: [`boardEq`](../../src/chesslib/board.c.md#boardEq)  (Implementation)


---
### boardEqContext<!-- {{#callable_declaration:boardEqContext}} -->
Compares two chess boards for equality, ignoring move counters and filtering en passant target squares.
- **Description**: Use this function to determine if two chess boards are equivalent in terms of piece positions, current player, castling rights, and valid en passant targets, while ignoring move counters. This function is useful when you need to compare boards for game state equivalence without considering the number of moves or half-moves. It is important to ensure that both board pointers are valid and initialized before calling this function. The function will return a non-zero value if the boards are considered equal under these conditions, and zero otherwise.
- **Inputs**:
    - `b1`: A pointer to the first board structure to compare. Must not be null and should be properly initialized.
    - `b2`: A pointer to the second board structure to compare. Must not be null and should be properly initialized.
- **Output**: Returns a non-zero value if the boards are equal in terms of piece positions, current player, castling rights, and valid en passant targets; returns zero otherwise.
- **See also**: [`boardEqContext`](../../src/chesslib/board.c.md#boardEqContext)  (Implementation)


---
### boardGetFen<!-- {{#callable_declaration:boardGetFen}} -->
Generates a FEN string representing the current state of the chess board.
- **Description**: This function creates a Forsyth-Edwards Notation (FEN) string that describes the current state of the given chess board. It is useful for saving the board state or for interoperability with other chess software that uses FEN. The function allocates memory for the FEN string, which the caller is responsible for freeing. It assumes that the input board is properly initialized and contains valid data. The function handles all aspects of the FEN format, including piece placement, active color, castling availability, en passant target square, halfmove clock, and fullmove number.
- **Inputs**:
    - `b`: A pointer to a 'board' structure representing the current state of the chess game. Must not be null and should be properly initialized with valid data.
- **Output**: A dynamically allocated string containing the FEN representation of the board. The caller is responsible for freeing this memory.
- **See also**: [`boardGetFen`](../../src/chesslib/board.c.md#boardGetFen)  (Implementation)



---
Made with ❤️ by [Driver](https://www.driver.ai/)